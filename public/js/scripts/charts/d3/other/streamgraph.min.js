$(window).on("load",function(){function t(t){var n,a=[];for(n=0;n<t;++n)a[n]=0;for(n=0;n<5;++n)!function(n){for(var a=1/(.1+Math.random()),r=2*Math.random()-.5,e=10/(.1+Math.random()),o=0;o<t;o++){var i=(o/t-r)*e;n[o]+=a*Math.exp(-i*i)}}(a);return a.map(function(t,n){return{x:n,y:Math.max(0,t)}})}var n=d3.select("#streamgraph"),a={top:20,right:20,bottom:30,left:50},r=n.node().getBoundingClientRect().width-a.left-a.right,e=500-a.top-a.bottom,o=d3.layout.stack().offset("wiggle"),i=o(d3.range(20).map(function(){return t(200)})),d=o(d3.range(20).map(function(){return t(200)})),u=d3.scale.linear().domain([0,199]).range([0,r]),c=d3.scale.linear().domain([0,d3.max(i.concat(d),function(t){return d3.max(t,function(t){return t.y0+t.y})})]).range([e,0]),f=d3.scale.linear().range(["#99B898","#FECEA8"]),l=d3.svg.area().x(function(t){return u(t.x)}).y0(function(t){return c(t.y0)}).y1(function(t){return c(t.y0+t.y)});n.append("svg").attr("width",r).attr("height",e).selectAll("path").data(i).enter().append("path").attr("d",l).style("fill",function(){return f(Math.random())})});