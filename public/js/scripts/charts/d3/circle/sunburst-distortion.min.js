$(window).on("load",function(){function n(n){if(e=n.parent){var e,a=e.x;e.children.forEach(function(r){a+=t(r,a,r===n?.8*e.dx/n.value:e.dx*(1-.8)/(e.value-n.value))})}else t(n,0,n.dx/n.value);path.transition().duration(750).attrTween("d",r)}function t(n,e,r){if(n.x=e,n.children&&(a=n.children.length))for(var a,d=-1;++d<a;)e+=t(n.children[d],e,r);return n.dx=n.value*r}function e(n){n.x0=n.x,n.dx0=n.dx}function r(n){var t=d3.interpolate({x:n.x0,dx:n.dx0},n);return function(e){var r=t(e);return n.x0=r.x,n.dx0=r.dx,o(r)}}var a=d3.select("#sunburst-distortion"),d=a.node().getBoundingClientRect().width;radius=190;var i=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#C06C84","#6C5B7B","#355C7D"]),u=d3.layout.partition().size([2*Math.PI,radius]).value(function(n){return n.size}),o=d3.svg.arc().startAngle(function(n){return n.x}).endAngle(function(n){return n.x+n.dx}).innerRadius(function(n){return n.y}).outerRadius(function(n){return n.y+n.dy}),l=a.append("svg").attr("width",d).attr("height",400).append("g").attr("transform","translate("+d/2+",200)");d3.json("../../../app-assets/data/d3/circle/flare.json",function(t,r){if(t)throw t;path=l.data([r]).selectAll("path").data(u.nodes).enter().append("path").attr("d",o).style("fill",function(n){return i((n.children?n:n.parent).name)}).on("click",n).each(e)})});