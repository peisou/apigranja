$(window).on("load",function(){function t(){u.decrementCounter(),r()}function n(){u.incrementCounter(),r()}function r(t,n){$("#currentMonth").text(u.monthToDisplayAsText()+" "+u.yearToDisplay());var r=u.daysInMonth(),a=u.gridCellPositions;u.datesGroup.selectAll("text").data(r).attr("x",function(t,n){return a[n][0]}).attr("y",function(t,n){return a[n][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+u.gridXTranslation+","+u.gridYTranslation+")").text(function(t){return t[0]}),u.calendar.selectAll("rect").data(r).style("fill",function(t){return t[1]}),e()}function e(){var t=a(),n=u.cellWidth/3,r=d3.layout.pie(),e=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),o=d3.svg.arc().innerRadius(0).outerRadius(n),l=[];for(i=0;i<t.length;i++){var d=r(t[i]);for(j=0;j<d.length;j++)l.push([d[j],i,j])}var c=u.gridCellPositions;u.chartsGroup.selectAll("g.arc").remove();var s=u.chartsGroup.selectAll("g.arc").data(l).enter().append("g").attr("class","arc").attr("transform",function(t){var r=t[1];return"translate("+(n+5*u.gridXTranslation+c[r][0])+", "+(n+1.25*u.gridYTranslation+c[r][1])+")"});s.append("path").attr("fill",function(t,n){return e(t[2])}).attr("d",function(t,n){return o(t[0])}),s.append("text").attr("transform",function(t,n){return"translate("+o.centroid(t[0])+")"}).attr("text-anchor","middle").text(function(t,n){return t[0].value}).style("fill","#FFF")}function a(){for(var t=[],n=0;n<35;n++)t.push([Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(100*Math.random())]);return t}function o(t,n){u.calendar=d3.select("#pie-calendar").append("svg").attr("class","calendar").attr("width",u.calendarWidth).attr("height",u.calendarHeight).append("g");var r=u.gridCellPositions;u.calendar.selectAll("rect").data(r).enter().append("rect").attr("x",function(t){return t[0]}).attr("y",function(t){return t[1]}).attr("width",u.cellWidth).attr("height",u.cellHeight).style("stroke","#555").style("fill","white").attr("transform","translate("+u.gridXTranslation+","+u.gridYTranslation+")");var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];u.calendar.selectAll("headers").data([0,1,2,3,4,5,6]).enter().append("text").attr("x",function(t){return r[t][0]}).attr("y",function(t){return r[t][1]}).attr("dx",u.gridXTranslation+5).attr("dy",30).text(function(t){return a[t]}),u.datesGroup=u.calendar.append("svg:g");var i=u.daysInMonth();u.datesGroup.selectAll("daysText").data(i).enter().append("text").attr("x",function(t,n){return r[n][0]}).attr("y",function(t,n){return r[n][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+u.gridXTranslation+","+u.gridYTranslation+")").text(function(t){return t[0]}),u.chartsGroup=u.calendar.append("svg:g"),e()}function l(){width=ele.node().getBoundingClientRect().width-margin.left-margin.right,container.attr("width",width+margin.left+margin.right),svg.attr("width",width+margin.left+margin.right),x.range([0,width]),svg.selectAll(".d3-xaxis").call(xAxis),svg.selectAll(".d3-line").attr("d",line)}var u=function(){function t(){return h-10}function n(){return p-40}function r(){return t()/7}function e(){return n()/5}function a(){return g}function o(t){g=t}function l(){A+=1}function u(){A-=1}function d(){var t=new Date;return t.setMonth(F+A),t.getMonth()}function c(){return D[d()]}function s(){var t=new Date;return t.setMonth(F+A),t.getFullYear()}function f(){var t=[],n=new Date(s(),d(),1).getDay(),r=new Date(s(),d(),0).getDate();for(i=1;i<=n;i++)t.push([r-n+i,w]);var e=new Date(s(),d()+1,0).getDate();for(i=1;i<=e;i++)t.push([i,T]);var a=35-t.length;for(i=1;i<=a;i++)t.push([i,w]);return t.slice(0,35)}var g,h=(d3.select("#pie-calendar"),1380),p=820,m=10,v=40,w="#EAEAEA",T="#FFFFFF",A=0,F=(new Date).getMonth(),D=["January","February","March","April","May","June","July","August","September","October","November","December"];return{calendarWidth:function(){return h}(),calendarHeight:function(){return p}(),gridXTranslation:function(){return m}(),gridYTranslation:function(){return v}(),gridWidth:t(),gridHeight:n(),cellWidth:r(),cellHeight:e(),getDatesGroup:a,setDatesGroup:o,incrementCounter:l,decrementCounter:u,monthToDisplay:d(),monthToDisplayAsText:c,yearToDisplay:s,gridCellPositions:function(){var t=[];for(y=0;y<5;y++)for(x=0;x<7;x++)t.push([x*r(),y*e()]);return t}(),daysInMonth:f}}();$(document).ready(function(){o(),r(),$("#back").on("click",t),$("#forward").on("click",n)}),$(window).on("resize",l),$(".menu-toggle").on("click",l)});